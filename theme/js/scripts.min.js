function requestHeaders(){return{"Content-Type":"application/json"}}async function submitJukeboxRequest(){alertBody.classList.add(D_NONE);try{const e=new FormData(jukeboxFormElement),t=Object.fromEntries(e),n=await fetch(JUKEBOX_ROUTE,{method:"POST",headers:requestHeaders(),body:JSON.stringify(t)}),s=await n.json();if(n.status>299)throw new Error(s.message);alertText.innerText=s.message,alertBody.classList.remove(ALERT_DANGER_CLASS),alertBody.classList.add(ALERT_SUCCESS_CLASS),sequenceNameElement.selectedIndex=0,codeElement.value="";const l=5e3;setTimeout(()=>{alertBody.classList.add(D_NONE)},l)}catch(e){alertText.innerText=e,alertBody.classList.remove(ALERT_SUCCESS_CLASS),alertBody.classList.add(ALERT_DANGER_CLASS)}alertBody.classList.remove(D_NONE)}async function getDisplayData(){if(null!=songTitleElement)try{const e=await fetch(JUKEBOX_ROUTE,{method:"GET",headers:requestHeaders()});if(e.status>299)throw new Error(t.message);let t=await e.json();""===t.title?(songTitleElement.innerText="SHOW OFFLINE",artistElement.innerText="Show times are listed below",jukeboxFormElement.classList.add(D_NONE),showMetaDataElement.classList.add(D_NONE),onAirElement.classList.add(D_NONE)):(songTitleElement.innerText=t.title,artistElement.innerText=t.artist,nwsTempElement.innerText=t.nwstemp,windChillElement.innerText=t.windchill,cpuTempElement.innerText=t.cputemp,lastUpdatedElement.innerText=t.createdtime+" ET",jukeboxFormElement.classList.remove(D_NONE),showMetaDataElement.classList.remove(D_NONE),onAirElement.classList.remove(D_NONE)),errorsElement.innerText=""}catch(e){errorsElement.innerText=e}}const JUKEBOX_ROUTE="/jukeboxapi.php",ALERT_DANGER_CLASS="alert-danger",ALERT_SUCCESS_CLASS="alert-success",D_NONE="d-none",artistElement=document.getElementById("songArtist"),cpuTempElement=document.getElementById("cpuTemp"),jukeboxFormElement=document.getElementById("jukeboxForm"),sequenceNameElement=document.getElementById("sequenceName"),codeElement=document.getElementById("code"),nwsTempElement=document.getElementById("nwsTemp"),showMetaDataElement=document.getElementById("showMetaData"),songTitleElement=document.getElementById("songTitle"),windChillElement=document.getElementById("windChill"),lastUpdatedElement=document.getElementById("lastUpdated"),errorsElement=document.getElementById("errors"),onAirElement=document.getElementById("onAir");getDisplayData();const delaySeconds=1e4;setInterval(getDisplayData,delaySeconds);